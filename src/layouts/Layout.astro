---
import { Image } from "astro:assets";
import HeaderTab from "../components/HeaderTab";
import ADLogo from "@/images/adpharm-digital-logomark.png";
import "../styles/switzer.css";
import Section from "./Section.astro";
import { MainNavigation } from "../components/NavigationMenu";
import { Menu } from "lucide-react";
import { MenuSheet } from "@/components/Sheet";


const isProd = import.meta.env.PROD;

interface Props {
  title: string;
}

declare const window: Window & { dataLayer: Record<string, unknown>[] };

const { title } = Astro.props;

const desc = `
  The Adpharm is a full-service healthcare marketing communications agency located in downtown Oakville. 
  Since 2007, our diverse and dedicated team has helped pharmaceutical clients of all sizes to launch, 
  nurture and optimize the potential of their brands.
`;

interface NavigationItem {
  label: string;
  href?: string;
  children?: NavigationItem[];
}

const currentPath = Astro.url.pathname;

const navItems = [
  {
    label: "Our Brands",
    children: [
      { label: "The Adpharm", href: "/" },
      { label: "Adpharm Digital", href: "/digital" },
      { label: "Synapse Medcom", href: "https://www.synapsemedcom.ca"}
    ],
  },
  {
    label: "About",
    href: "/about",
  },
  {
    label: "Clients",
    href: "/clients",
  },
  {
    label: "Services",
    href: "/services",
  },
  {
    label: "Contact",
    href: "/contact",
  },
];
---

<!doctype html>
<html lang="en">
  <head>
    {isProd && (
      // <!-- Google Tag Manager -->
      <script is:inline>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://gmeter.adpharm.digital/prxy/enc__www.g00gl3t4gm4n4g3r.c0m__enc/enc__/gtm.j5__enc?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','customDataLayer','GTM-KFCZ8V83');
      </script>
    )}


    {isProd && (
      // Meta Pixel Code
      <script is:inline>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '981424656758665');
      fbq('track', 'PageView');
      </script>
      <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=981424656758665&ev=PageView&noscript=1"
      /></noscript>
    )}


    {isProd && (
      // LinkedIn Insights Tag
      <script type="text/javascript" is:inline>
      _linkedin_partner_id = "5934508";
      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
      window._linkedin_data_partner_ids.push(_linkedin_partner_id);
      </script>
      <script type="text/javascript" is:inline>
      (function(l) {
      if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
      window.lintrk.q=[]}
      var s = document.getElementsByTagName("script")[0];
      var b = document.createElement("script");
      b.type = "text/javascript";b.async = true;
      b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
      s.parentNode.insertBefore(b, s);})(window.lintrk);
      </script>
      <noscript>
      <img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=5934508&fmt=gif" />
      </noscript>
    )}

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#2b5797" />

    <meta name="theme-color" content="#090909" />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={desc} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.request.url} />
    <meta property="og:image" content="/ogimage.jpg" />
    <meta property="og:image:width" content="1080" />
    <meta property="og:image:height" content="720" />

    <title>{title}</title>
    <meta name="description" content={desc} />

    <slot name="meta" />
  </head>
  <body>
    {
      isProd && (
        // <!-- Google Tag Manager (noscript) -->
        <noscript>
          <iframe
            src="https://gmeter.adpharm.digital/prxy/enc__www.g00gl3t4gm4n4g3r.c0m__enc/ns.html?id=GTM-KFCZ8V83"
            height="0"
            width="0"
            style="display:none;visibility:hidden"
          />
        </noscript>
        // <!-- End Google Tag Manager (noscript) -->
      )
    }
    <!-- 






      Header
     -->
    <Section>
      <header
        class="lg:px-5 sm:px-0 pt-4 sm:pt-4 pb-4 z-40 fixed top-0 left-0 w-full flex items-center justify-between bg-black border-b border-zinc-800"
      >
        <div>
          <!-- <a href="/">
            <Image
              src={ADLogo}
              alt="The Adpharm"
              class="w-10"
            />
          </a> -->
        </div>
        <div
          class="flex items-center justify-between w-full p-1 space-x-0.5 mx-4 lg:mx-10"
        >
          <!-- <HeaderTab
            title="The Adpharm"
            href="/"
            active={Astro.url.pathname === "/"}
          />
          <HeaderTab
            title="Synapse Medcom"
            href="https://www.synapsemedcom.ca/"
          />
          <HeaderTab
            title="Adpharm Digital"
          href="/digital"
            active={Astro.url.pathname === "/digital"}
            className="hidden sm:inline-block"
          /> -->
          <img src="/adpharm-logo@4x.png" alt="the adpharm" class="w-36"/>
          <MainNavigation items={navItems} currentPath={currentPath} client:idle />
          <MenuSheet client:idle />
        </div>
        <div></div>
      </header>
    </Section>

    <!-- 





      Content
     -->
    <slot />
  </body>
</html>

<style is:global>
  @tailwind base;
  @tailwind components; 
  @tailwind utilities;

  html {
    font-family: "Switzer-Variable", "ui-sans-serif", system-ui, sans-serif;
    font-weight: 300;
    background: #000;
    color: #fafafa;
  }
  code {
    font-family:
      Menlo,
      Monaco,
      Lucida Console,
      Liberation Mono,
      DejaVu Sans Mono,
      Bitstream Vera Sans Mono,
      Courier New,
      monospace;
  }

  @layer utilities {
    .pause {
      animation-play-state: paused !important;
    }

    .animation-delay-50 {
      animation-delay: 50ms;
    }
    .animation-delay-100 {
      animation-delay: 100ms;
    }
    .animation-delay-500 {
      animation-delay: 500ms;
    }
    .animation-delay-1000 {
      animation-delay: 1s;
    }
  }
</style>
